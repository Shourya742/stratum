{
    "version": "2",
    "doc": [
        "This test does",
        "Soft mocking of template provider that sends two templates (NewTemplate message) with very little time in between",
        "Listen to port 8442",
        "Awaits for other roles setup (5s)",
        "Awaits for SetupConnection message (pool)",
        "Responds with SetupConnection.Success (pool)"
    ],
    "template_distribution_messages": [],
    "frame_builders": [
        {
            "type": "automatic",
            "message_id": "test/message-generator/messages/common_messages.json::setup_connection_success_template_distribution"
        }
    ],
    "actions": [
        {
            "message_ids": [],
            "role": "server",
            "results": [
                {
                    "type": "match_message_type",
                    "value": "0x00"
                }
            ],
            "actiondoc": "(pool) This action checks that a SetupConnection message is received"
        },
        {
            "message_ids": ["setup_connection_success_template_distribution"],
            "role": "server",
            "results": [],
            "actiondoc": "(pool) This action sends SetupConnection.Success with flag 2 (TD protocol)"
        },
        {
            "message_ids": [],
            "role": "server",
            "results": [
                {
                    "type": "match_message_type",
                    "value": "0x70"
                }
            ],
          "actiondoc": "This action checks that a message CoinbaseOutputDataSize is received"
        }
    ],
    "setup_commands": [],
    "execution_commands": [],
    "cleanup_commands": [
        {
            "command": "sleep",
            "args": ["10000"],
            "conditions": "None"
        }
    ],
    "role": "server",
    "upstream": {
        "ip": "127.0.0.1",
        "port": 8442,
        "pub_key": "9auqWEzQDVyd2oe1JVGFLMLHZtCo2FFqZwtKA5gd9xbuEu7PH72",
        "secret_key": "mkDLTBBRxdBv998612qipDYoTK3YUrqLe8uWw7gu3iXbSrn2n"
    }
}
