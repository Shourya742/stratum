{
    "version": "2",
    "doc": [
        "This test does",
        "Launch real pool",
        "Launch real JDC",
        "Mock TP",
        "Mock JDS",
        "Mock TProxy",
        "todo: describe message sequence"
    ],
    "frame_builders": [
        {
            "type": "automatic",
            "message_id": "test/message-generator/messages/common_messages.json::setup_connection_success_tproxy"
        }
    ],
    "actions": [
    ],
    "setup_commands": [
        {
            "command": "cargo",
            "args": [
                "run",
                "../../test/message-generator/mock/template-provider-mock-quick-template.json"
            ],

            "conditions": {
                "WithConditions": {
                    "conditions": [
                        {
                            "output_string": "",
                            "output_location": "StdErr",
                            "condition": true,
                            "late_condition": false
                        }
                    ],
                    "timer_secs": 1000,
                    "warn_no_panic": false
                }
            }
        },
        {
            "command": "cargo",
            "args": [
                "llvm-cov",
                "--no-report",
                "run",
                "-p",
                "pool_sv2",
                "--",
                "-c",
                "../test/config/pool-config-local-tp.toml"
            ],
            "conditions": {
                "WithConditions": {
                    "conditions": [
                        {
                            "output_string": "Pool INITIALIZING",
                            "output_location": "StdOut",
                            "late_condition": false,
                            "condition": true
                        }
                    ],
                    "timer_secs": 1000,
                    "warn_no_panic": false
                }
            }
        },
        {
            "command": "sleep",
            "args": ["10000"],
            "conditions": "None"
        },
        {
            "command": "cargo",
            "args": [
                "run",
                "../../test/message-generator/mock/jds-mock-quick-templates.json"
            ],

            "conditions": {
                "WithConditions": {
                    "conditions": [
                        {
                            "output_string": "",
                            "output_location": "StdErr",
                            "condition": true,
                            "late_condition": false
                        }
                    ],
                    "timer_secs": 600,
                    "warn_no_panic": false
                }
            }
        },
        {
            "command": "sleep",
            "args": ["1000"],
            "conditions": "None"
        },
        {
            "command": "cargo",
            "args": [
                "llvm-cov",
                "--no-report",
                "run",
                "-p",
                "jd_client",
                "--",
                "-c",
                "../test/config/jdc-quick-template-update/jdc-config.toml"
            ],
            "conditions": {
                "WithConditions": {
                    "conditions": [
                        {
                            "output_string": "JD CONNECTED",
                            "output_location": "StdOut",
                            "late_condition": false,
                            "condition": true
                        }
                    ],
                    "timer_secs": 600,
                    "warn_no_panic": false
                }
            }
        },
        {
            "command": "cargo",
            "args": [
                "run",
                "../../test/message-generator/mock/tproxy-mock-quick-template.json"
            ],

            "conditions": {
                "WithConditions": {
                    "conditions": [
                        {
                            "output_string": "",
                            "output_location": "StdErr",
                            "condition": true,
                            "late_condition": false
                        }
                    ],
                    "timer_secs": 1000,
                    "warn_no_panic": true
                }
            }
        }
    ],
    "execution_commands": [
    ],
    "cleanup_commands": [
        {
            "command": "pkill",
            "args":  ["-f", "jd_client", "-SIGINT"],
            "conditions": "None"
        },
        {
            "command": "pkill",
            "args":  ["-f", "pool_sv2", "-SIGINT"],
            "conditions": "None"
        }
    ],
    "role": "none"
}
