{
    "version": "2",
    "doc": [
        "This test does",
        "Mock TP1 on port: 8442",
        "Launch real pool on port: 34254",
        "Mock JDS on port: 34264",
        "Launch real JDC on port: 34265",
        "Mock TP2 on port: 8443",
        "Mock Downstream",
        "Mock TP1 spun up",
        "Pool spun up",
        "Pool sends setup connection request to TP1",
        "TP1 responses back with setupConnection success",
        "Pool sends CoinbaseOutputDataSize to TP1",
        "Mock JDS spuns up",
        "JDC spuns up",
        "Mock TP2 spuns up",
        "Mock Downstream spuns up",
        "JDC sends setupConnection request to JDS",
        "JDS responses back with setupConnection success to JDC",
        "JDC sends setup connection request to TP2",
        "TP2 responses back with setupConnection success",
        "JDC sends CoinbaseOutputDataSize to TP2",
        "Downstream sends setup connection request to JDC",
        "JDC sends setup connection success request to downstream"
    ],
    "frame_builders": [],
    "actions": [],
    "setup_commands": [
        {
            "command": "cargo",
            "args": [
                "run",
                "../../test/message-generator/mock/template-provider-mock-quick-template.json"
            ],

            "conditions": {
                "WithConditions": {
                    "conditions": [
                        {
                            "output_string": "",
                            "output_location": "StdErr",
                            "condition": true,
                            "late_condition": false
                        }
                    ],
                    "timer_secs": 1000000,
                    "warn_no_panic": false
                }
            }
        },
        {
            "command": "cargo",
            "args": [
                "llvm-cov",
                "--no-report",
                "run",
                "-p",
                "pool_sv2",
                "--",
                "-c",
                "../test/config/pool-config-local-tp.toml"
            ],
            "conditions": {
                "WithConditions": {
                    "conditions": [
                        {
                            "output_string": "Pool INITIALIZING",
                            "output_location": "StdOut",
                            "late_condition": false,
                            "condition": true
                        }
                    ],
                    "timer_secs": 1000000,
                    "warn_no_panic": false
                }
            }
        },
        {
            "command": "sleep",
            "args": ["600"],
            "conditions": "None"
        },
        {
            "command": "cargo",
            "args": [
                "run",
                "../../test/message-generator/mock/jds-mock-quick-templates.json"
            ],

            "conditions": {
                "WithConditions": {
                    "conditions": [
                        {
                            "output_string": "",
                            "output_location": "StdErr",
                            "condition": true,
                            "late_condition": false
                        }
                    ],
                    "timer_secs": 60000,
                    "warn_no_panic": false
                }
            }
        },
        {
            "command": "cargo",
            "args": [
                "llvm-cov",
                "--no-report",
                "run",
                "-p",
                "jd_client",
                "--",
                "-c",
                "../test/config/jdc-quick-template-update/jdc-config.toml"
            ],
            "conditions": {
                "WithConditions": {
                    "conditions": [
                        {
                            "output_string": "JD CONNECTED",
                            "output_location": "StdOut",
                            "late_condition": false,
                            "condition": true
                        }
                    ],
                    "timer_secs": 600000,
                    "warn_no_panic": false
                }
            }
        },
        {
            "command": "cargo",
            "args": [
                "run",
                "../../test/message-generator/mock/template-provider-mock-quick-template2.json"
            ],

            "conditions": {
                "WithConditions": {
                    "conditions": [
                        {
                            "output_string": "",
                            "output_location": "StdErr",
                            "condition": true,
                            "late_condition": false
                        }
                    ],
                    "timer_secs": 1000000,
                    "warn_no_panic": false
                }
            }
        },
        {
            "command": "cargo",
            "args": [
                "run",
                "../../test/message-generator/mock/downstream-mock-quick-template.json"
            ],

            "conditions": {
                "WithConditions": {
                    "conditions": [
                        {
                            "output_string": "",
                            "output_location": "StdErr",
                            "condition": true,
                            "late_condition": false
                        }
                    ],
                    "timer_secs": 10000000,
                    "warn_no_panic": true
                }
            }
        }
    ],
    "execution_commands": [],
    "cleanup_commands": [
        {
            "command": "sleep",
            "args": ["10000"],
            "conditions": "None"
        },
        {
            "command": "pkill",
            "args":  ["-f", "jd_client", "-SIGINT"],
            "conditions": "None"
        },
        {
            "command": "pkill",
            "args":  ["-f", "pool_sv2", "-SIGINT"],
            "conditions": "None"
        }
    ],
    "role": "none"
}
